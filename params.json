{"name":"Apache-http-proxy","tagline":"How to configure apache HTTP proxy","body":"准备篇：\r\n\r\n1、配置防火墙，开启80端口、3306端口<br>\r\n`vi /etc/sysconfig/iptables`<br>\r\n`-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT` #允许80端口通过防火墙<br>\r\n`-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT` #允许3306端口通过防火墙<br>\r\n\r\n备注：很多网友把这两条规则添加到防火墙配置的最后一行，导致防火墙启动失败，<br>\r\n\r\n正确的应该是添加到默认的22端口这条规则的下面<br>\r\n\r\n如下所示：<br>\r\n\r\n########################################################<br>\r\n`# Firewall configuration written by system-config-firewall`<br>\r\n`# Manual customization of this file is not recommended.`<br>\r\n`*filter`<br>\r\n`:INPUT ACCEPT [0:0]`<br>\r\n`:FORWARD ACCEPT [0:0]`<br>\r\n`:OUTPUT ACCEPT [0:0]`<br>\r\n`-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT`<br>\r\n`-A INPUT -p icmp -j ACCEPT`<br>\r\n`-A INPUT -i lo -j ACCEPT`<br>\r\n`-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT`<br>\r\n`-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT`<br>\r\n`-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT`<br>\r\n`-A INPUT -j REJECT --reject-with icmp-host-prohibited`<br>\r\n`-A FORWARD -j REJECT --reject-with icmp-host-prohibited`<br>\r\n`COMMIT`<br>\r\n########################################################<br>\r\n\r\n`/etc/init.d/iptables restart` #重启防火墙使配置生效<br>\r\n\r\n2、关闭SELINUX<br>\r\n`vi /etc/selinux/config`<br>\r\n`#SELINUX=enforcing` #注释掉<br>\r\n`#SELINUXTYPE=targeted` #注释掉<br>\r\n`SELINUX=disabled` #增加<br>\r\n`:wq!`#保存退出<br>\r\n`shutdown -r now`#重启系统<br>\r\n\r\n安装篇：<br>\r\n\r\n一、安装Apache<br>\r\n`yum install httpd` #根据提示，输入Y安装即可成功安装<br>\r\n`/etc/init.d/httpd start`#启动Apache<br>\r\n备注：Apache启动之后会提示错误：<br>\r\n正在启动 httpd:httpd: Could not reliably determine the server's fully qualif domain name, using ::1 for ServerName<br>\r\n解决办法：<br>\r\n`vi /etc/httpd/conf/httpd.conf` #编辑<br>\r\n找到 #ServerName www.example.com:80<br>\r\n修改为 ServerName www.urian.org #这里设置为你自己的域名，如果没有域名，可以设置为localhost<br>\r\n:wq! #保存退出<br>\r\n`chkconfig httpd on` #设为开机启动<br>\r\n`/etc/init.d/httpd restart` #重启Apache<br>\r\n\r\n配置篇：\r\n\r\n接下来我们修改Apache的配置文件使其支持HTTP代理服务器功能。用文本编辑器打开httpd.conf文件。该文件位于Apache安装目\r\n录的conf目录下。如果你在安装Apache的时候没有改变安装路径，那么它应当位于C:\\Program Files\\Apache\r\nGroup\\Apache\\conf\\httpd.conf。<br>\r\n首先要添加代理服务器模块。找到下面这几行：<br>\r\n`#LoadModule proxy_module modules/mod_proxy.so`<br>\r\n`#LoadModule proxy_connect_module modules/mod_proxy_connect.so`<br>\r\n`#LoadModule proxy_http_module modules/mod_proxy_http.so`<br>\r\n`#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so`<br>\r\n去掉前面的#号使相应的模块生效。然后使用托盘中的Apache控制程序重新启动Apache。（也可以使用命令行net stop\r\napache2然后net start apache2命令进行服务器重启。）这时Apache应该能够正常启动，虽然现在它还不是代理服务器。<br>\r\n然后我们在配置文件中加入下面这一行：<br>\r\n`ProxyRequests On`<br>\r\n\r\n最后重启apache服务器：`/etc/init.d/httpd restart`\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}